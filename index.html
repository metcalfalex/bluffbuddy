<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
    

</script>

<script type="text/javascript">
$(document).ready(function(){

    function GetZPercent(z) 
      {
        // http://stackoverflow.com/questions/16194730/seeking-a-statistical-javascript-function-to-return-p-value-from-a-z-score
        //z == number of standard deviations from the mean

        //if z is greater than 6.5 standard deviations from the mean
        //the number of significant digits will be outside of a reasonable 
        //range
        if ( z < -6.5)
          return 0.0;
        if( z > 6.5) 
          return 1.0;

        var factK = 1;
        var sum = 0;
        var term = 1;
        var k = 0;
        var loopStop = Math.exp(-23);
        while(Math.abs(term) > loopStop) 
        {
          term = .3989422804 * Math.pow(-1,k) * Math.pow(z,k) / (2 * k + 1) / Math.pow(2,k) * Math.pow(z,k+1) / factK;
          sum += term;
          k++;
          factK *= k;

        }
        sum += 0.5;

        return sum;
      }

    dcnt = 0
    bsest = 0
    unk_prob = 0

    $("#testForm input:radio").click(function() {
        bid_dice = $("input[name=bid]:checked").val();
        mea_dice = $("input[name=mea]:checked").val();
        meb_dice = $("input[name=meb]:checked").val();
        unk_dice = $("input[name=unk]:checked").val();
        sam_dice = $("input[name=same]:checked").val();
        off_dice = $("input[name=off]:checked").val();
        dcnt = +mea_dice + +unk_dice + +sam_dice + +off_dice;
        $('#dcnt').text(dcnt); // Update dice count

    });

    $('#calcuatebutton').click(function(){
        unk_prob = $('#unk_prob').val();
        sam_prob = $('#sam_prob').val();
        off_prob = $('#off_prob').val();
        zscore_u = +unk_dice * +unk_prob + 
            +sam_dice * +sam_prob + 
            +off_dice * +off_prob
        zscore_s2 = +unk_dice * +unk_prob  * (1 - +unk_prob) +
            +sam_dice * +sam_prob  * (1 - +sam_prob) +
            +off_dice * +off_prob  * (1 - +off_prob)
        zscore = ((+zscore_u-(+bid_dice - +meb_dice + 0.5))/Math.sqrt(+zscore_s2))
        pvalue = GetZPercent(zscore)
        $('#bsest').text(pvalue); // Update bid success estimate

    });

});
</script>

</head>

<body>

<h1>Bluff Buddy</h1>

<form name="myForm" id="testForm">
Bid:<br>
    0<input type="radio" name="bid" value="0" checked>
    1<input type="radio" name="bid" value="1"> 
    2<input type="radio" name="bid" value="2"> 
    3<input type="radio" name="bid" value="3"> 
    4<input type="radio" name="bid" value="4"> 
    5<input type="radio" name="bid" value="5"> 
    6<input type="radio" name="bid" value="6"> 
    7<input type="radio" name="bid" value="7"> 
    8<input type="radio" name="bid" value="8"> 
    9<input type="radio" name="bid" value="9"> 
    10<input type="radio" name="bid" value="10"> 
    11<input type="radio" name="bid" value="11"> 
    12<input type="radio" name="bid" value="12"> 
    13<input type="radio" name="bid" value="13"> 
    14<input type="radio" name="bid" value="14"> 
    15<input type="radio" name="bid" value="15"><p>
Me (All dice):<br>
    0<input type="radio" name="mea" value="0" checked>
    1<input type="radio" name="mea" value="1"> 
    2<input type="radio" name="mea" value="2"> 
    3<input type="radio" name="mea" value="3"> 
    4<input type="radio" name="mea" value="4"> 
    5<input type="radio" name="mea" value="5"> 
    6<input type="radio" name="mea" value="6"> 
    7<input type="radio" name="mea" value="7"> 
    8<input type="radio" name="mea" value="8"> 
    9<input type="radio" name="mea" value="9"> 
    10<input type="radio" name="mea" value="10"> 
    11<input type="radio" name="mea" value="11"> 
    12<input type="radio" name="mea" value="12"> 
    13<input type="radio" name="mea" value="13"> 
    14<input type="radio" name="mea" value="14"> 
    15<input type="radio" name="mea" value="15"><p>
Me (Bid dice):<br>
    0<input type="radio" name="meb" value="0" checked>
    1<input type="radio" name="meb" value="1"> 
    2<input type="radio" name="meb" value="2"> 
    3<input type="radio" name="meb" value="3"> 
    4<input type="radio" name="meb" value="4"> 
    5<input type="radio" name="meb" value="5"> 
    6<input type="radio" name="meb" value="6"> 
    7<input type="radio" name="meb" value="7"> 
    8<input type="radio" name="meb" value="8"> 
    9<input type="radio" name="meb" value="9"> 
    10<input type="radio" name="meb" value="10"> 
    11<input type="radio" name="meb" value="11"> 
    12<input type="radio" name="meb" value="12"> 
    13<input type="radio" name="meb" value="13"> 
    14<input type="radio" name="meb" value="14"> 
    15<input type="radio" name="meb" value="15"><p>
Unknown:<br>
    0<input type="radio" name="unk" value="0" checked>
    1<input type="radio" name="unk" value="1"> 
    2<input type="radio" name="unk" value="2"> 
    3<input type="radio" name="unk" value="3"> 
    4<input type="radio" name="unk" value="4"> 
    5<input type="radio" name="unk" value="5"> 
    6<input type="radio" name="unk" value="6"> 
    7<input type="radio" name="unk" value="7"> 
    8<input type="radio" name="unk" value="8"> 
    9<input type="radio" name="unk" value="9"> 
    10<input type="radio" name="unk" value="10"> 
    11<input type="radio" name="unk" value="11"> 
    12<input type="radio" name="unk" value="12"> 
    13<input type="radio" name="unk" value="13"> 
    14<input type="radio" name="unk" value="14"> 
    15<input type="radio" name="unk" value="15"><p>
Same:<br>
    0<input type="radio" name="same" value="0" checked>
    1<input type="radio" name="same" value="1"> 
    2<input type="radio" name="same" value="2"> 
    3<input type="radio" name="same" value="3"> 
    4<input type="radio" name="same" value="4"> 
    5<input type="radio" name="same" value="5"> 
    6<input type="radio" name="same" value="6"> 
    7<input type="radio" name="same" value="7"> 
    8<input type="radio" name="same" value="8"> 
    9<input type="radio" name="same" value="9"> 
    10<input type="radio" name="same" value="10"> 
    11<input type="radio" name="same" value="11"> 
    12<input type="radio" name="same" value="12"> 
    13<input type="radio" name="same" value="13"> 
    14<input type="radio" name="same" value="14"> 
    15<input type="radio" name="same" value="15"><p>
Off:<br>
    0<input type="radio" name="off" value="0" checked>
    1<input type="radio" name="off" value="1"> 
    2<input type="radio" name="off" value="2"> 
    3<input type="radio" name="off" value="3"> 
    4<input type="radio" name="off" value="4"> 
    5<input type="radio" name="off" value="5"> 
    6<input type="radio" name="off" value="6"> 
    7<input type="radio" name="off" value="7"> 
    8<input type="radio" name="off" value="8"> 
    9<input type="radio" name="off" value="9"> 
    10<input type="radio" name="off" value="10"> 
    11<input type="radio" name="off" value="11"> 
    12<input type="radio" name="off" value="12"> 
    13<input type="radio" name="off" value="13"> 
    14<input type="radio" name="off" value="14"> 
    15<input type="radio" name="off" value="15"><p>

Other players' dice count: <br>
<h4 id="dcnt">0</h4>

<input type="button" id="calcuatebutton" value="Calculate"><p>

Bid Success Estimate: <br>
<h4 id="bsest">0</h4>

Unknown:<input type="text" id="unk_prob" value="0.167"><br> <!-- !!! if not number between 0 and 1, error -->
Same:<input type="text" id="sam_prob" value="0.5"><br>
Off:<input type="text" id="off_prob" value="0.083"><br>

</form>

</body>
</html>
